{"_id":"02QzRtdJyyuD70Z4","name":"Bite - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Bite\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/red_29.jpg","actorIds":[]}
{"_id":"0Sw3bBSyx1dnbkYa","name":"Minor Illusion - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Minor Illusion\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/shadow_12.jpg","actorIds":[]}
{"_id":"29HbTaHpYDXESUQl","name":"Spare the Dying - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Spare the Dying\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-sky-1.jpg","actorIds":[]}
{"_id":"2zbtw1Uq0jil5kT7","name":"Channel Divinity: Turn Undead - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Channel Divinity: Turn Undead\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/yellow_19.jpg","actorIds":[]}
{"_id":"3n0l1Ura91hwiwS1","name":"Hat of Wizardry - equipment","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Hat of Wizardry\", {type: \"equipment\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Wizard%20Hat_1.PNG","actorIds":[]}
{"_id":"4xHJFxVVt80MTc1a","name":"Breath Weapon (Brass) - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Breath Weapon (Brass)\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/copper-dragon.png","actorIds":[]}
{"_id":"5w3sISz6716B8oMC","name":"Longsword, +1 - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Longsword, +1\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/sword_1.png","actorIds":[]}
{"_id":"6rEp2yATO9vRrmQR","name":"Quarterstaff - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Quarterstaff\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/quarterstaff.jpg","actorIds":[]}
{"_id":"6vAHEjBjOX6ugz42","name":"Random Cutting Words","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"// Courtesy of @Zarek\r\n// Selected target receives a random cutting word from a table called \"Mockeries\" along with the roll reduction.\r\n// You can find a mockeries table in the community table module.\r\n\r\nlet cuttingWords = () => {\r\n  // Setup variables\r\n  let tableName = \"mockeries\";\r\n  let mockery = \"Now go away or I shall taunt you a second time-a!\"; // if table can't be found, use this.\r\n\r\n  if (!actor) {\r\n    ui.notifications.warn(\"You must have an actor selected.\");\r\n    return\r\n  }\r\n  \r\n  let actorLevels = actor.data.data.levels || 1;\r\n  let table = game.tables.entities.find(t => t.name == tableName);\r\n  // Get Targets name\r\n  const targetId = game.user.targets.ids[0];\r\n  const targetToken = canvas.tokens.get(targetId);\r\n  if (!targetToken) {\r\n    ui.notifications.warn(\"You must target a token.\");\r\n    return\r\n  }\r\n  const targetName = targetToken.name;\r\n\r\n  // Roll the result, and mark it drawn\r\n  if (table) {\r\n    if (checkTable(table)) {\r\n      let roll = table.roll();\r\n      let result = roll.results[0];\r\n      mockery = result.text;\r\n      table.updateEmbeddedEntity(\"TableResult\", {\r\n        _id: result._id,\r\n        drawn: true\r\n      });\r\n    }\r\n  }\r\n\r\n  function checkTable(table) {\r\n    let results = 0;\r\n    for (let data of table.data.results) {\r\n      if (!data.drawn) {\r\n        results++;\r\n      }\r\n    }\r\n    if (results < 1) {\r\n      table.reset();\r\n      ui.notifications.notify(\"Table Reset\")\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  let dieType = 'd6';\r\n  if (actorLevels >= 15) {\r\n    dieType = 'd12';\r\n  } else if (actorLevels >= 10) {\r\n    dieType = 'd10';\r\n  } else if (actorLevels >= 5) {\r\n    dieType = 'd8';\r\n  }\r\n\r\n  let messageContent = `<p>${targetName} Reduce your roll by: <b>[[1${dieType}]]</b>.</p>`\r\n  messageContent += `<p>${token.name} exclaims <b><i>\"${mockery}\"</i></b></p>`\r\n  messageContent += `<details closed=\"\"><summary><a>Cutting Words</a></summary>\r\n  <p>When a creature that you can see within 60 feet of you makes an <b>Attack roll, an ability check, or a damage roll</b>, you can use your <b>Reaction</b> to expend one of your uses of <b>Bardic Inspiration</b>,\r\n  rolling a Bardic Inspiration die and subtracting the number rolled from the creature’s roll.</p>\r\n  <p>You can choose to use this feature after the creature makes its roll, but before the GM determines whether the Attack roll or ability check succeeds or fails, or before the creature deals its damage. \r\n  The creature is immune if it can’t hear you or if it’s immune to being <b>Charmed</b>.</p></details>`\r\n\r\n  // create the message\r\n  if (messageContent !== '') {\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: messageContent,\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  }\r\n};\r\n\r\ncuttingWords();\r\n","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/red_10.jpg","actorIds":[]}
{"_id":"7aVLgiYb2nai5iDP","name":"Animal Friendship - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Animal Friendship\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wild-jade-2.jpg","actorIds":[]}
{"_id":"7erOQa6hqSf5CLW2","name":"Keen Smell - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Keen Smell\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/blue_29.jpg","actorIds":[]}
{"_id":"8qtSiyC3KCrRmK83","name":"Zone of Truth - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Zone of Truth\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/runes-magenta-2.jpg","actorIds":[]}
{"_id":"97zvnLhZEyri8yeA","name":"Fire Bolt - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Fire Bolt\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fireball-red-1.jpg","actorIds":[]}
{"_id":"9mEBRKRpEfrrpfE1","name":"Shield of Faith - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Shield of Faith\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/protect-sky-2.jpg","actorIds":[]}
{"_id":"9nX8tHXeoTyBbXX4","name":"Handaxe - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Handaxe\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/handaxe.jpg","actorIds":[]}
{"_id":"Akq9KeuP4Oavzz5w","name":"Pokey: Longsword +1 - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Pokey: Longsword +1\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/sword_1.png","actorIds":[]}
{"_id":"Av8sKnOQOeJjjhVa","name":"Blade Ward - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Blade Ward\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/ice_12.jpg","actorIds":[]}
{"_id":"B6KOYHtPeXIzXbPY","name":"Shield - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Shield\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/protect-magenta-1.jpg","actorIds":[]}
{"_id":"C8ms2QbD0V69L4CI","name":"Chromatic Orb - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Chromatic Orb\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/light-eerie-1.jpg","actorIds":[]}
{"_id":"COuiikcgvdgFdwJq","name":"Light - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Light\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/light-sky-1.jpg","actorIds":[]}
{"_id":"CyzjSa7EO7UVNWpX","name":"Inflict Wounds - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Inflict Wounds\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/rip-jade-2.jpg","actorIds":[]}
{"_id":"DlmpGR1WUVOQ5uiO","name":"Warhammer: The Dentist - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Warhammer: The Dentist\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/weapons/warhammer.png","actorIds":[]}
{"_id":"E9DW10fSw6grpfux","name":"Grease - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Grease\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fog-orange-1.jpg","actorIds":[]}
{"_id":"ESMFoVUej9tywBEs","name":"Hellish Rebuke - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Hellish Rebuke\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/horror-red-1.jpg","actorIds":[]}
{"_id":"EUTzedwvthyVCIRP","name":"Arcane Recovery - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Arcane Recovery\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/green_11.jpg","actorIds":[]}
{"_id":"Eg1IMHOVrTwIZWp5","name":"Eldritch Blast - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Eldritch Blast\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fireball-eerie-1.jpg","actorIds":[]}
{"_id":"GEy30462UjJv162y","name":"Savage Attacker - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Savage Attacker\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.2_43.png","actorIds":[]}
{"_id":"HGKD6mo7Ad4DVTnL","name":"Dissonant Whispers - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Dissonant Whispers\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.4_43.png","actorIds":[]}
{"_id":"HGfXcXaaehRfFt1l","name":"Primal Savagery - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Primal Savagery\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/blue_34.jpg","actorIds":[]}
{"_id":"HXdJyhjRHyLvDEs3","name":"Ranger’s Companion - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Ranger’s Companion\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/blue_29.jpg","actorIds":[]}
{"_id":"I9yqi6j3jB5vMy03","name":"Sling - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Sling\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/sling.jpg","actorIds":[]}
{"_id":"IYgkCffFtGZg57Qx","name":"Warding Bond - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Warding Bond\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wild-orange-2.jpg","actorIds":[]}
{"_id":"JXgsl0vGExFl5MMA","name":"Mage Slayer - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"Mage Slayer - feat ","icon":"imports/icons/Icon.2_46.png","module":"macro-marker","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mage Slayer\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/death-note.svg","actorIds":[]}
{"_id":"JtIMHD4RRsoLBjSL","name":"Aid - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Aid\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-sky-1.jpg","actorIds":[]}
{"_id":"JyFxlWxBirml262w","name":"Pole of Collapsing - equipment","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Pole of Collapsing\", {type: \"equipment\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.5_97.png","actorIds":[]}
{"_id":"K1nPptefVQYkiODi","name":"Word of Radiance - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Word of Radiance\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/light-air-fire-3.jpg","actorIds":[]}
{"_id":"K5uxKpP7fGHSlcSQ","name":"Guidance - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Guidance\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/haste-sky-1.jpg","actorIds":[]}
{"_id":"K86LGoIBrHDCnMrL","name":"Greataxe - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Greataxe\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/greataxe.jpg","actorIds":[]}
{"_id":"KLIWbSxLSmnrVMp7","name":"Prestidigitation - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Prestidigitation\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/explosion-royal-1.jpg","actorIds":[]}
{"_id":"LCSxgK7K5ls5GlqF","name":"Guiding Bolt - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Guiding Bolt\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fireball-sky-2.jpg","actorIds":[]}
{"_id":"LHAlQls5Thf9jQZn","name":"Mending - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mending\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wind-blue-1.jpg","actorIds":[]}
{"_id":"LYzk9UTxvqzlXAyJ","name":"Detect Evil and Good - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Detect Evil and Good\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/air-burst-sky-2.jpg","actorIds":[]}
{"_id":"LvgHUW6CchgJb4uA","name":"Minor Conjuration - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Minor Conjuration\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.3_35.png","actorIds":[]}
{"_id":"MBTsRY7cuudqLS1E","name":"Random Mockeries (Vicious Mockery)","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"// Courtesy of @Zarek\r\n// Selected target receives a random mockery from a table called \"mockeries\" along with the DC and damage.\r\n// You can find a table called mockeries in the community tables module.\r\n\r\n\r\nlet tableName = \"mockeries\";\r\n// default mockery if no table found.\r\nlet mockery = \"Now go away or I shall taunt you a second time-a!\";\r\n\r\nlet viciousMockeries = () => {\r\n  if (!actor) {\r\n    ui.notifications.warn(\"You must have an actor selected.\");\r\n    return\r\n  }\r\n\r\n  let actorLevels = actor.data.data.levels || 1;\r\n  let table = game.tables.entities.find(t => t.name == tableName);\r\n\r\n  // Get Targets name\r\n  const targetId = game.user.targets.ids[0];\r\n  const targetToken = canvas.tokens.get(targetId);\r\n  if (!targetToken) {\r\n    ui.notifications.warn(\"You must target a token.\");\r\n    return\r\n  }\r\n  const targetName = targetToken.name;\r\n\r\n  // Roll the result, and mark it drawn\r\n  if (table) {\r\n    if (checkTable(table)) {\r\n      let roll = table.roll();\r\n      let result = roll.results[0];\r\n      mockery = result.text;\r\n      table.updateEmbeddedEntity(\"TableResult\", {\r\n        _id: result._id,\r\n        drawn: true\r\n      });\r\n    }\r\n  }\r\n\r\n  function checkTable(table) {\r\n    let results = 0;\r\n    for (let data of table.data.results) {\r\n      if (!data.drawn) {\r\n        results++;\r\n      }\r\n    }\r\n    if (results < 1) {\r\n      table.reset();\r\n      ui.notifications.notify(\"Table Reset\")\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  // Add a message with damage roll\r\n  let numDie = 1;\r\n  if (actorLevels >= 17) {\r\n    numDie = 4;\r\n  } else if (actorLevels >= 11) {\r\n    numDie = 3;\r\n  } else if (actorLevels >= 5) {\r\n    numDie = 2;\r\n  }\r\n\r\n  let messageContent = `<p>${targetName} Roll WIS save DC [[8+${actor.data.data.abilities.cha.mod}+@attributes.prof]] or take [[${numDie}d4]] damage and have disadvantage.</p>`\r\n  messageContent += `<p>${token.name} exclaims <b><i>\"${mockery}\"</i></b></p>`\r\n  messageContent += `<details closed=\"\"><summary><a>Vicious Mockery</a></summary><p>You unleash a string of insults laced with subtle enchantments at a creature you can see within range. If the target can hear you (though it need not understand you), it must succeed on a <strong>Wisdom saving throw</strong> or take <strong>1d4 psychic damage</strong> and have <strong>disadvantage on the next attack roll</strong> it makes before the end of its next turn.</p>\r\n    <p>This spell’s damage increases by 1d4 when you reach 5th level ([[/r 2d4]]), 11th level ([[/r 3d4]]), and 17th level ([[/r 4d4]]).</p></details>`\r\n\r\n  // create the message\r\n  if (messageContent !== '') {\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: messageContent,\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  }\r\n};\r\n\r\nviciousMockeries();\r\n","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/emerald_06.jpg","actorIds":[]}
{"_id":"MlYFm2N31jyLx1g9","name":"Channel Divinity: Vow of Enmity - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Channel Divinity: Vow of Enmity\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_16.jpg","actorIds":[]}
{"_id":"NBoPQqMmS0qWoTWu","name":"Control Flames - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Control Flames\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/fire_07.jpg","actorIds":[]}
{"_id":"OGLiJJEjqhrpPzIo","name":"Healing Word - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Healing Word\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-jade-1.jpg","actorIds":[]}
{"_id":"OK1znOPvATGE69tT","name":"Toll the Dead - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Toll the Dead\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/inventory/bell_brass.jpg","actorIds":[]}
{"_id":"OV6EIpLQwMU6vZ5S","name":"Random Inspiration (Bard)","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"// Courtesy of @Zarek\r\n// Selected target receives a random inspiration from a table called \"inspirations\".\r\n// You can find a table called inspirations in the community tables module\r\n\r\n// Setup variables\r\nlet tableName = \"inspirations\";\r\n\r\nlet bardicInspiration = () => {\r\n  if (!actor) {\r\n    ui.notifications.warn(\"You must have an actor selected.\");\r\n    return\r\n  }\r\n\r\n  // Get Targets name\r\n  let actorLevels = actor.data.data.levels || 1;\r\n  const targetId = game.user.targets.ids[0];\r\n  const targetToken = canvas.tokens.get(targetId);\r\n  if (!targetToken) {\r\n    ui.notifications.warn(\"You must target a token.\");\r\n    return\r\n  }\r\n  const targetName = targetToken.name;\r\n\r\n\r\n  let table = game.tables.entities.find(t => t.name == tableName);\r\n\r\n  //default inspiration if no table is found.\r\n  //let inspiration = \"Cowards die many times before their deaths; the valiant never taste death but once.\";\r\n  let inspiration = `I don't know what effect ${targetName} will have upon the enemy, but, by God, he terrifies me.`;\r\n  \r\n  // Roll the result, and mark it drawn\r\n  if (table) {\r\n    if (checkTable(table)) {\r\n      // let result = table.roll()[1];\r\n      let roll = table.roll();\r\n      let result = roll.results[0];\r\n      inspiration = result.text;\r\n      table.updateEmbeddedEntity(\"TableResult\", {\r\n        _id: result._id,\r\n        drawn: true\r\n      });\r\n    }\r\n  }\r\n\r\n  function checkTable(table) {\r\n    let results = 0;\r\n    for (let data of table.data.results) {\r\n      if (!data.drawn) {\r\n        results++;\r\n      }\r\n    }\r\n    if (results < 1) {\r\n      table.reset();\r\n      ui.notifications.notify(\"Table Reset\")\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  let dieType = 'd6';\r\n  if (actorLevels >= 15) {\r\n    dieType = 'd12';\r\n  } else if (actorLevels >= 10) {\r\n    dieType = 'd10';\r\n  } else if (actorLevels >= 5) {\r\n    dieType = 'd8';\r\n  }\r\n\r\n  let messageContent = '';\r\n  messageContent += `<p>${token.name} exclaims <b><i>\"${inspiration}\"</i></b></p>`\r\n  messageContent += `<p>${targetName} is inspired.</p>`\r\n  messageContent += `<details closed=\"\"><summary><a>Bardic Inspiration</a></summary><p>${targetName} gains one Bardic Inspiration die, a <strong>${dieType}</strong>.<br>Once within the next 10 minutes, ${targetName} can roll the die and add the number rolled to one <b>ability check, attack roll, or saving throw</b>. ${targetName} can wait until after it rolls the <strong>d20</strong> before deciding to use the Bardic Inspiration die, but must decide before the DM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost.</p></details>`\r\n\r\n  // create the message\r\n  if (messageContent !== '') {\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: messageContent,\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  }\r\n};\r\nbardicInspiration();\r\n","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/inventory/lute.jpg","actorIds":[]}
{"_id":"OoXc9KTW65SYeSgR","name":"Great Weapon Master","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"/*\r\nCreated Monkan#8752 with guidance from the Rage macro in the FVTT Community Macros\r\n\r\nTips to make it work\r\n 1 -    Have a feature called 'Great Weapon Master' for your character.\r\n 2 -    Make sure you have your weapons with Heavy property filled out. \r\n 3 -    if you make any changes to your damage or attack calculations, make sure you toggle it off.\r\n        As it stores the old values to replace once you disable the feat.  It could undo your changes.\r\n*/\r\n\r\nlet gwm='';\r\nlet chatMsg='';\r\n\r\n\r\nif (actor !== undefined && actor !== null) {\r\n    // find the feat Great Weapon Master\r\n    gwm = actor.items.find(i => i.name === 'Great Weapon Master');\r\n    if (gwm == undefined) { \r\n        ui.notifications.warn(\"Please select a single token with the Great Weapon Master feat.\");        \r\n    }\r\n\r\n    if (gwm !== undefined && gwm !== null) {\r\n\t\tchatMsg = '';\r\n\t\tlet enabled = false;\r\n\t\t// store the state of the GWM toggle in flags\r\n\t\tif (actor.data.flags.gwmMacro !== null && actor.data.flags.gwmMacro !== undefined) {\r\n\t\t\tenabled = true;\r\n\t\t}\r\n\t\t// if GWM is active, disable it\r\n\t\tif (enabled) {\r\n            chatMsg = `${actor.name} is swinging Normally now.`;\r\n            \r\n            let obj = {};\r\n\t\t\tobj['flags.gwmMacro'] = null;\t\t\t\r\n\t\t\tactor.update(obj);\r\n\r\n\t\t\t// reset items\r\n\t\t\tfor (let item of actor.items) {\r\n\t\t\t\tif (item.data.flags.gwmMacro !== null && item.data.flags.gwmMacro !== undefined) {\r\n\t\t\t\t\t// restoring the old value from flags\r\n                    let oldDmg = item.data.flags.gwmMacro.oldDmg;\r\n                    let oldAtk = item.data.flags.gwmMacro.oldAtk;\r\n\t\t\t\t\tlet obj = {};\r\n                    obj['data.damage.parts'] = oldDmg;\r\n                    obj['data.attackBonus'] = oldAtk;\r\n\t\t\t\t\tobj['flags.gwmMacro'] = null;\r\n\t\t\t\t\titem.update(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t// if GWM is disabled, enable it\r\n\t\t} else {\r\n            chatMsg = `${actor.name} is swinging Harder!`;\r\n            \r\n            let obj = {};\r\n\t\t\tobj['flags.gwmMacro.enabled'] = true;\r\n\t\t\tactor.update(obj);\r\n\r\n            // update items\r\n            let gwmAtk = -5;\r\n\t\t\tlet gwmDmg = 10;\r\n\t\t\tfor (let item of actor.items) {\r\n                let isMelee = getProperty(item, 'data.data.actionType') === 'mwak';\r\n                let isHeavy = getProperty(item, 'data.data.properties.hvy')\r\n\t\t\t\tif (isMelee && isHeavy && item.data.data.damage.parts.length > 0) {\r\n\t\t\t\t\tconsole.log('updating ' + item);\r\n                    let obj = {};\r\n                    let atk = item.data.data.attackBonus;\r\n                    let dmg = item.data.data.damage.parts;\r\n                    // Save old attack and damage values\r\n                    obj['flags.gwmMacro.oldDmg'] = JSON.parse(JSON.stringify(dmg));\r\n                    obj['flags.gwmMacro.oldAtk'] = JSON.parse(JSON.stringify(atk));\r\n                    // Set the new attack and damage values\r\n                    if (atk !== null) {\r\n                        atk += '' + gwmAtk;\r\n                    } else {\r\n                        atk = gwmAtk;\r\n                    }\r\n\t\t\t\t\tdmg[0][0] = `${dmg[0][0]} + ${gwmDmg}`;\r\n                    obj['data.damage.parts'] = dmg;\r\n                    obj['data.attackBonus'] = atk;\r\n\t\t\t\t\titem.update(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n    }\r\n\r\n} else ui.notifications.warn(\"Please select a token.\");\r\n\r\n// write to chat if needed:\r\nif (chatMsg !== '') {\r\n\tlet chatData = {\r\n\t\tuser: game.user._id,\r\n\t\tspeaker: ChatMessage.getSpeaker(),\r\n\t\tcontent: chatMsg\r\n    };\r\n\tChatMessage.create(chatData, {});\r\n}","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.5_46.png","actorIds":[]}
{"_id":"PbKiMgBX64KZZzmC","name":"Speak with Animals - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Speak with Animals\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wild-jade-1.jpg","actorIds":[]}
{"_id":"QfzKEb8QN9pzCsvZ","name":"Action Surge - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Action Surge\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/red_01.jpg","actorIds":[]}
{"_id":"Qi4bAXrIF7R3V1Vl","name":"Shortbow - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Shortbow\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/bow-short.jpg","actorIds":[]}
{"_id":"Qzg2XgyR6PJpEMZB","name":"Greatsword - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Greatsword\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/sword-great.jpg","actorIds":[]}
{"_id":"RXFlkVm4aSKuZagE","name":"Earthbind - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Earthbind\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/wind-grasp-air-2.jpg","actorIds":[]}
{"_id":"RfYo8MvmCRvurJ1b","name":"Lucky - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Lucky\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/lucky.jpg","actorIds":[]}
{"_id":"SKdb3IAnpK8J9bsT","name":"Scorching Ray - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Scorching Ray\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/beam-red-2.jpg","actorIds":[]}
{"_id":"Ss72lojff6Z7amoo","name":"Maximilian’s Earthen Grasp - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Maximilian’s Earthen Grasp\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/wind-grasp-air-3.jpg","actorIds":[]}
{"_id":"TK5RftejVSbopekf","name":"Detect Magic - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Detect Magic\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/light-blue-2.jpg","actorIds":[]}
{"_id":"TNBHcoDYmjiP8ZZN","name":"Unseen Servant - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Unseen Servant\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wind-grasp-sky-2.jpg","actorIds":[]}
{"_id":"TivW9OYG7ddDmbso","name":"Mage Slayer Attack - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"Mage Slayer Attack - feat ","icon":"imports/icons/Icon.2_46.png","module":"macro-marker","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mage Slayer Attack\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/death-note.svg","actorIds":[]}
{"_id":"U5LhqpRNtxp64hGm","name":"Cunning Action - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Cunning Action\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/violet_10.jpg","actorIds":[]}
{"_id":"UUY87kVmqwk7gWVE","name":"Comprehend Languages - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Comprehend Languages\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/runes-royal-1.jpg","actorIds":[]}
{"_id":"UpJwFH1sPHBn8bJH","name":"Shortsword - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Shortsword\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/sword-short.jpg","actorIds":[]}
{"_id":"VKU9lhdf9XEp3rY9","name":"Second Wind - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Second Wind\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/blood_04.jpg","actorIds":[]}
{"_id":"VWyXS5UO2Zn1q7zO","name":"Sending Stones - equipment","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Sending Stones\", {type: \"equipment\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/sending_stones.jpeg","actorIds":[]}
{"_id":"VZEMfHeuweY88c10","name":"Morningstar - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Morningstar\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/morningstar.jpg","actorIds":[]}
{"_id":"VnOS8b3ErkQDtTM1","name":"Fast Hands - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Fast Hands\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/gray_05.jpg","actorIds":[]}
{"_id":"VoWHoj6CNmGeFB1W","name":"Prayer of Healing - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Prayer of Healing\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-jade-2.jpg","actorIds":[]}
{"_id":"WRizngQ1vgAmmS7K","name":"Handaxe: The Barber - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Handaxe: The Barber\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/weapons/handaxe.jpg","actorIds":[]}
{"_id":"WZUxLNwmDNeBFOAa","name":"Dagger - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Dagger\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/dagger.jpg","actorIds":[]}
{"_id":"Xmw01uTjzDtEzOp1","name":"Burning Hands - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Burning Hands\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fog-orange-2.jpg","actorIds":[]}
{"_id":"Y9V81ho30muKqA1g","name":"Channel Divinity: Abjure Enemy - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Channel Divinity: Abjure Enemy\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_19.jpg","actorIds":[]}
{"_id":"YWD1D9RXZdntmcgd","name":"Magic Weapon - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Magic Weapon\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/enchant-blue-2.jpg","actorIds":[]}
{"_id":"YdnCDzDyb2PTOVr7","name":"Divine Favor - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Divine Favor\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/enchant-sky-2.jpg","actorIds":[]}
{"_id":"YqnWUlFWbPHuVjY1","name":"Bane - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"icon":"systems/dnd5e/icons/spells/rip-magenta-2.jpg","tooltip":"Bane - spell (Copy) ","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"MinorQOL.doRoll(event, \"Bane\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/rip-magenta-2.jpg","actorIds":[]}
{"_id":"YrnpkJuJ4A9Y1Kbj","name":"Potion of Healing (Greater) - consumable","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Potion of Healing (Greater)\", {type: \"consumable\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/potions/minor-red.jpg","actorIds":[]}
{"_id":"Z1wXr8DLPUygDJ92","name":"Find Familiar - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Find Familiar\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wild-eerie-2.jpg","actorIds":[]}
{"_id":"ZHoPLH3lmDSsgjbF","name":"Identify - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Identify\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/light-eerie-1.jpg","actorIds":[]}
{"_id":"ZJlEb10gelCHiqBE","name":"War Priest - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"War Priest\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/spells/enchant-sky-3.jpg","actorIds":[]}
{"_id":"ZqnkA32RP4ng5Syh","name":"Crossbow, Light - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Crossbow, Light\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/weapons/crossbow-light.jpg","actorIds":[]}
{"_id":"a0CHQVaghTbU2YRV","name":"Channel Divinity: Preserve Life - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Channel Divinity: Preserve Life\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/light_03.jpg","actorIds":[]}
{"_id":"a48SBBs0U8J7IIH5","name":"Longbow - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Longbow\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/bow-long.jpg","actorIds":[]}
{"_id":"aqyP87QayuJKEsOr","name":"Lay on Hands - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Lay on Hands\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/light_10.jpg","actorIds":[]}
{"_id":"bDnCd5uSeasUNXq2","name":"Channel Divinity: Guided Strike - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Channel Divinity: Guided Strike\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_22.jpg","actorIds":[]}
{"_id":"bmW9ym86xIDbJVWZ","name":"Rallying Cry - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Rallying Cry\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/active11.png","actorIds":[]}
{"_id":"cztKl17RqD9Hfzfn","name":"Wand of Pyrotechnics - equipment","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Wand of Pyrotechnics\", {type: \"equipment\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Wand2_1.PNG","actorIds":[]}
{"_id":"dtnQWQbI9PpaiPi0","name":"Primeval Awareness - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Primeval Awareness\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/violet_02.jpg","actorIds":[]}
{"_id":"eGSJFXeikGWNwTiO","name":"Dagger: The Eye Doctor - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Dagger: The Eye Doctor\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/items/weapons/dagger.jpg","actorIds":[]}
{"_id":"eIAAh7576roBMbck","name":"Mace - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mace\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/morningstar.jpg","actorIds":[]}
{"_id":"elO3a2gN6NHM4O4w","name":"Magic Missile - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Magic Missile\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fire-arrows-magenta-1.jpg","actorIds":[]}
{"_id":"eoE7Z30FDPAxNgxJ","name":"Sanctuary - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Sanctuary\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/protect-sky-2.jpg","actorIds":[]}
{"_id":"g6I5lxQbBaS1vjtx","name":"Resistance - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Resistance\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/protect-royal-1.jpg","actorIds":[]}
{"_id":"i09NwCAMGHpYysuO","name":"Second-Story Work - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Second-Story Work\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/blue_07.jpg","actorIds":[]}
{"_id":"iOM0aQ8oyjobn7D3","name":"Mage Armor - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mage Armor\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/protect-blue-1.jpg","actorIds":[]}
{"_id":"iTUzLgrmvMoj0TJJ","name":"Potion of Healing - consumable","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Potion of Healing\", {type: \"consumable\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/potions/minor-red.jpg","actorIds":[]}
{"_id":"idHarMvR7Pdjswg5","name":"War Caster - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"War Caster\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.2_68.png","actorIds":[]}
{"_id":"kotdQiIJJD97AM4S","name":"Wrathful Smite - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Wrathful Smite\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/passive5.png","actorIds":[]}
{"_id":"ksksskxc1Novm3wM","name":"Snare - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Snare\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/nature_04.jpg","actorIds":[]}
{"_id":"kyPCvf966UL6f4jT","name":"Spiritual Weapon - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Spiritual Weapon\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/enchant-magenta-2.jpg","actorIds":[]}
{"_id":"l5dORbnQHKfJ1z2O","name":"Thieves’ Cant - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Thieves’ Cant\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.3_90.png","actorIds":[]}
{"_id":"ldTIzaMtVNZY1Dzf","name":"Net - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Net\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/net.jpg","actorIds":[]}
{"_id":"ljInu28ghLBmXN7O","name":"Pounce - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Pounce\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_23.jpg","actorIds":[]}
{"_id":"m1HEOOD22KtnobHK","name":"Rope Trick - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Rope Trick\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/slice-spirit-1.jpg","actorIds":[]}
{"_id":"mBL0AGZcCw1GrC5c","name":"Sharpshooter - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"/*\r\nCreated Monkan#8752 with guidance from the Rage macro in the FVTT Community Macros\r\n\r\nTips to make it work\r\n 1 -    Have a feature called 'Sharpshooter' for your character.\r\n 2 -    Make sure you have your weapons with Ranged Weapon Attack. \r\n 3 -    if you make any changes to your damage or attack calculations, make sure you toggle it off.\r\n        As it stores the old values to replace once you disable the feat.  It could undo your changes.\r\n*/\r\n\r\nlet ss='';\r\nlet chatMsg='';\r\n\r\n\r\nif (actor !== undefined && actor !== null) {\r\n    // find the feat Sharpshooter\r\n    ss = actor.items.find(i => i.name === 'Sharpshooter');\r\n    if (ss == undefined) { \r\n        ui.notifications.warn(\"Please select a single token with the Sharpshooter feat.\");        \r\n    }\r\n\r\n    if (ss !== undefined && ss !== null) {\r\n\t\tchatMsg = '';\r\n\t\tlet enabled = false;\r\n\t\t// store the state of the Sharpshooter toggle in flags\r\n\t\tif (actor.data.flags.ssMacro !== null && actor.data.flags.ssMacro !== undefined) {\r\n\t\t\tenabled = true;\r\n\t\t}\r\n\t\t// if Sharpshooter is active, disable it\r\n\t\tif (enabled) {\r\n            chatMsg = `${actor.name} is aiming Normally now.`;\r\n            \r\n            let obj = {};\r\n\t\t\tobj['flags.ssMacro'] = null;\t\t\t\r\n\t\t\tactor.update(obj);\r\n\r\n\t\t\t// reset items\r\n\t\t\tfor (let item of actor.items) {\r\n\t\t\t\tif (item.data.flags.ssMacro !== null && item.data.flags.ssMacro !== undefined) {\r\n\t\t\t\t\t// restoring the old value from flags\r\n                    let oldDmg = item.data.flags.ssMacro.oldDmg;\r\n                    let oldAtk = item.data.flags.ssMacro.oldAtk;\r\n\t\t\t\t\tlet obj = {};\r\n                    obj['data.damage.parts'] = oldDmg;\r\n                    obj['data.attackBonus'] = oldAtk;\r\n\t\t\t\t\tobj['flags.ssMacro'] = null;\r\n\t\t\t\t\titem.update(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t// if Sharpshooter is disabled, enable it\r\n\t\t} else {\r\n            chatMsg = `${actor.name} is aiming very carefully!`;\r\n            \r\n            let obj = {};\r\n\t\t\tobj['flags.ssMacro.enabled'] = true;\r\n\t\t\tactor.update(obj);\r\n\r\n            // update items\r\n            let ssAtk = -5;\r\n\t\t\tlet ssDmg = 10;\r\n\t\t\tfor (let item of actor.items) {\r\n                let isRanged = getProperty(item, 'data.data.actionType') === 'rwak';                \r\n\t\t\t\tif (isRanged && item.data.data.damage.parts.length > 0) {\r\n\t\t\t\t\tconsole.log('updating ' + item);\r\n                    let obj = {};\r\n                    let atk = item.data.data.attackBonus;\r\n                    let dmg = item.data.data.damage.parts;\r\n                    // Save old attack and damage values\r\n                    obj['flags.ssMacro.oldDmg'] = JSON.parse(JSON.stringify(dmg));\r\n                    obj['flags.ssMacro.oldAtk'] = JSON.parse(JSON.stringify(atk));\r\n                    // Set the new attack and damage values\r\n                    if (atk !== null) {\r\n                        atk += '' + ssAtk;\r\n                    } else {\r\n                        atk = ssAtk;\r\n                    }\r\n\t\t\t\t\tdmg[0][0] = `${dmg[0][0]} + ${ssDmg}`;\r\n                    obj['data.damage.parts'] = dmg;\r\n                    obj['data.attackBonus'] = atk;\r\n\t\t\t\t\titem.update(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n    }\r\n\r\n} else ui.notifications.warn(\"Please select a token.\");\r\n\r\n// write to chat if needed:\r\nif (chatMsg !== '') {\r\n\tlet chatData = {\r\n\t\tuser: game.user._id,\r\n\t\tspeaker: ChatMessage.getSpeaker(),\r\n\t\tcontent: chatMsg\r\n    };\r\n\tChatMessage.create(chatData, {});\r\n}","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/97.png","actorIds":[]}
{"_id":"mK1rt4tihLt5mMQh","name":"Silence - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Silence\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/runes-magenta-1.jpg","actorIds":[]}
{"_id":"mgwRD2LztGOUIfqK","name":"Hold Person - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Hold Person\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/shielding-eerie-2.jpg","actorIds":[]}
{"_id":"nNWUJhk61zVN8VhH","name":"Levitate - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Levitate\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wind-grasp-magenta-2.jpg","actorIds":[]}
{"_id":"q7pWACYh47ccxEgP","name":"Searing Smite - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Searing Smite\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/icon21.png","actorIds":[]}
{"_id":"r3KTPK7asQyLqI2N","name":"Bless - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Bless\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/haste-sky-1.jpg","actorIds":[]}
{"_id":"rJjJG1gOOfY6pWCZ","name":"Mirror Image - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mirror Image\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wind-grasp-magenta-2.jpg","actorIds":[]}
{"_id":"rSwMr6uE1AXyToGI","name":"Sleep - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Sleep\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/light-magenta-1.jpg","actorIds":[]}
{"_id":"t96toZeU0E3ilgxB","name":"Hunters Mark - Cast Mark","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"","icon":""}},"furnace":{"runAsGM":true}},"scope":"global","command":"//This marco is designed to be used in conjunction with MarkAttackWrapper.json\r\n//and GMConditions.js.\r\n\r\n//It is designed to replace the standard rollItemMacro for either the Hex\r\n//spell or the hunter's mark Spell on either the warlock or ranger, but\r\n//it will work on any class with hex or hunter's mark by changing the Localization\r\n//parameters. To use hex, replace warlockName variable below and if you\r\n//would like to use it with hunter's mark replace rangerName variable below.\r\n\r\n// CAUTION! if you change your global damage variables while this macro is\r\n//active the change will be erased. It should work fine with dynamic effects.\r\n\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//This macro is designed to be used with the combat utility belt module.\r\n//and the furnace module. Once you have it installed, you will have to enable \r\n//enhanced conditions, and create a condition called 'Marked' as the Localization \r\n//parameter below. You just need to update that parameter to match whatever condition \r\n//name you want if you want to use a different name in condition lab.\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//Localization\r\nconst rangerName = \"Ranger\";\r\nconst warlockName = \"Warlock\";\r\nconst rangerSpell = \"Hunter's Mark\";\r\nconst warlockSpell = \"Hex\";\r\nconst condition = \"Marked\";\r\nconst flagScope = \"world\";\r\n\r\n//parameters\r\nif (!token) ui.notifications.error(\"Please select your token first.\");\r\nlet myToken = token;\r\nconst markDmg = \" + 1d6\";\r\nif (!game.user.targets.values().next().value) {\r\n  ui.notifications.error(\"Please select one target\");\r\n}\r\nconst target = game.user.targets.values().next().value;\r\n\r\nconst conditionList = target.data.effects;\r\nconst actorId = myToken.actor._id + \"_mark\";\r\nconst bonuses = myToken.actor.data.data.bonuses;\r\nlet className = \"\";\r\nlet spellName = \"\";\r\nlet gm_macro = null\r\n\r\n//Check to make sure that the GM has the GMConditions macro assigned.\r\ntry{\r\n    gm_macro = game.macros.entities.find(mb => mb.name === \"GMConditions\");\r\n}\r\ncatch(err)\r\n{\r\n    ui.notifications.error(\"GMConditions Macro was not found\")\r\n}\r\n\r\n//If Move flag and condition to a new selected target\r\nfunction move() {\r\n  let swapTarget = myToken.getFlag(flagScope, actorId);\r\n  const remCon = canvas.tokens.get(swapTarget.targetId);\r\n  gm_macro.execute(\"remove\", condition, swapTarget.targetId);\r\n  swapTarget.targetId = target.data._id;\r\n  (async () => {\r\n    await myToken.unsetFlag(flagScope, actorId);\r\n    myToken.setFlag(flagScope, actorId, swapTarget);\r\n  })();\r\n  gm_macro.execute(\"apply\", condition, target.id);\r\n  console.log();\r\n}\r\n\r\n//revert global damage to base, remove the condition and unset flag\r\n\r\nfunction remove() {\r\n  const flagId = myToken.getFlag(flagScope, actorId);\r\n\r\n  let obj = {\r\n    \"data.bonuses.mwak.damage\": flagId.meleeAtk,\r\n    \"data.bonuses.rwak.damage\": flagId.rangeAtk,\r\n    \"data.bonuses.msak.damage\": flagId.meleeSpell,\r\n    \"data.bonuses.rsak.damage\": flagId.rangeSpell\r\n  };\r\n\r\n  updateActor(myToken, obj);\r\n\r\n  const remFlag = canvas.tokens.get(flagId.targetId);\r\n\r\n  (async () => {\r\n    await gm_macro.execute(\"remove\", condition, flagId.targetId);\r\n    await myToken.unsetFlag(flagScope, actorId);\r\n  })();\r\n}\r\n\r\n// User input to move or remove flag and condition\r\n\r\nfunction alterMark() {\r\n  const d = new Dialog({\r\n    title: \"Mark Enemy\",\r\n    content: \"<p>Would you like to move or remove?</p>\",\r\n    buttons: {\r\n      one: {\r\n        icon: '<i class=\"fas fa-check\"></i>',\r\n        label: \"Move\",\r\n        callback: () => move()\r\n      },\r\n      two: {\r\n        icon: '<i class=\"fas fa-times\"></i>',\r\n        label: \"Remove\",\r\n        callback: () => remove()\r\n      }\r\n    },\r\n    default: \"two\",\r\n    close: () => console.log(\"Dialog closed\")\r\n  }).render(true);\r\n}\r\n\r\n// cast the spell, apply the condition, create and set flag\r\n\r\nasync function castSpell() {\r\n  try {\r\n    await game.dnd5e.rollItemMacro(spellName);\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n  gm_macro.execute(\"apply\", condition, target.id);\r\n\r\n  let globalDmg = {\r\n    targetId: target.data._id,\r\n    meleeAtk: bonuses.mwak.damage,\r\n    rangeAtk: bonuses.rwak.damage,\r\n    meleeSpell: bonuses.msak.damage,\r\n    rangeSpell: bonuses.rsak.damage,\r\n    isSet: false\r\n  };\r\n  myToken.setFlag(flagScope, actorId, globalDmg);\r\n}\r\n\r\n//If the class is ranger and has the hunter's mark spell, set the spell name\r\n//or say the spell doesn't exist.\r\n\r\nfunction setRangerSpell() {\r\n  className = rangerName;\r\n  if (actor.items.find(i => i.name === `${rangerSpell}`)) {\r\n    spellName = rangerSpell;\r\n    castSpell();\r\n  } else {\r\n    ui.notifications.error(\r\n      \"Selected actor does not have the \" + rangerSpell + \" spell.\"\r\n    );\r\n    console.log(\"Selected actor does not have the \" + rangerSpell + \" spell.\");\r\n    return null;\r\n  }\r\n}\r\n\r\n//If the class is warlock and has the hex spell set the spell name\r\n//if say the spell doesn't exist\r\n\r\nfunction setWarlockSpell() {\r\n  className = warlockName;\r\n  if (actor.items.find(i => i.name === `${warlockSpell}`)) {\r\n    spellName = warlockSpell;\r\n    castSpell();\r\n  } else {\r\n    ui.notifications.error(\r\n      \"Selected actor does not have the \" + warlockSpell + \" spell.\"\r\n    );\r\n    console.log(\"Selected actor does not have the \" + warlockSpell + \" spell.\");\r\n    return null;\r\n  }\r\n}\r\n\r\n//check whether the token is a ranger or warlock\r\n\r\nfunction checkSpell() {\r\n  if (actor.items.find(i => i.name === `${rangerName}`)) {\r\n    setRangerSpell();\r\n  } else if (actor.items.find(i => i.name === `${warlockName}`)) {\r\n    setWarlockSpell();\r\n  } else {\r\n    ui.notifications.error(\r\n      \"Please select a \" + rangerName + \" or \" + warlockName + \" token.\"\r\n    );\r\n    console.log(\r\n      \"Please select a \" + rangerName + \" or \" + warlockName + \" token.\"\r\n    );\r\n  }\r\n}\r\n\r\nasync function updateActor(updateToken, obj) {\r\n  await updateToken.actor.update(obj);\r\n}\r\n\r\n//If the flag exists call functions to move or remove if it doesn't exist\r\n// call function to cast the spell\r\n\r\nif (myToken.getFlag(flagScope, actorId)) {\r\n  alterMark();\r\n} else {\r\n  checkSpell();\r\n}\r\n","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.1_16.png","actorIds":[]}
{"_id":"tSJMRJHBcaFJ5z7d","name":"Mage Hand Legerdemain - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Mage Hand Legerdemain\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_09.jpg","actorIds":[]}
{"_id":"tTmShXvLFKvH4SBY","name":"Misty Step - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Misty Step\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","actorIds":[]}
{"_id":"uP8jAnIQR5Yvkibk","name":"Divine Smite","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"macro-marker":{"activeData":{"tooltip":"Divine Smite ","icon":"systems/dnd5e/icons/skills/light_05.jpg","module":"macro-marker","colour":"#ff0000","trigger":""}},"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"/*\r\n * The Smite macro emulates the Divine Smite feature of Paladins in DnD 5e. A spell slot level to use\r\n * can be selected, which increases the number of damage dice, and smiting a fiend or undead\r\n * will also increase the number of damage dice.\r\n * \r\n * First, select a token to perform the smite, then target an enemy to be smitten. Make your regular \r\n * attack and then if you choose to use Divine Smite, run this macro.\r\n */\r\n\r\nlet confirmed = false;\r\n\r\n// Create a dialogue box to select spell slot level to use when smiting.\r\nnew Dialog({\r\n    title: \"Divine Smite Damage\",\r\n    content: `\r\n     <p>Spell Slot level to use Divine Smite with.</p>\r\n     <form>\r\n      <div class=\"form-group\">\r\n       <label>Spell Slot Level:</label>\r\n       <select id=\"slot-level\" name=\"slot-level\">\r\n        <option value=\"1\">1</option>\r\n        <option value=\"2\">2</option>\r\n        <option value=\"3\">3</option>\r\n        <option value=\"4\">4</option>\r\n        <option value=\"5\">5</option>\r\n       </select>\r\n      </div>\r\n     </form>\r\n     `,\r\n    buttons: {\r\n        one: {\r\n            icon: '<i class=\"fas fa-check\"></i>',\r\n            label: \"SMITE!\",\r\n            callback: () => confirmed = true\r\n        },\r\n        two: {\r\n            icon: '<i class=\"fas fa-times\"></i>',\r\n            label: \"Cancel\",\r\n            callback: () => confirmed = false\r\n        }\r\n    },\r\n    default: \"Cancel\",\r\n    close: html => {\r\n        if (confirmed) {\r\n            let slotLevel = parseInt(html.find('[name=slot-level]')[0].value);\r\n            smite(slotLevel);\r\n        }\r\n    }\r\n}).render(true);\r\n\r\n/**\r\n * Gives the spell slot information for a particular actor and spell slot level.\r\n * @param {Actor5e} actor - the actor to get slot information from.\r\n * @param {integer} level - the spell slot level to get information about. level 0 is deprecated.\r\n * @returns {object} contains value (number of slots remaining), max, and override.\r\n */\r\nfunction getSpellSlots(actor, level) {\r\n    let spells = actor.data.data.spells;\r\n    switch (level) {\r\n        case 1:\r\n            return spells.spell1;\r\n        case 2:\r\n            return spells.spell2;\r\n        case 3:\r\n            return spells.spell3;\r\n        case 4:\r\n            return spells.spell4;\r\n        case 5:\r\n            return spells.spell5;\r\n    }\r\n}\r\n\r\n/**\r\n * Use the controlled token to smite the targeted token.\r\n * @param {integer} slotLevel - the spell slot level to use when smiting.\r\n */\r\nfunction smite(slotLevel) {\r\n    let targets = game.user.targets;\r\n    let suseptible = [\"fiend\", \"undead\"];\r\n    let controlledActor = canvas.tokens.controlled[0].actor;\r\n    let chosenSpellSlots = getSpellSlots(controlledActor, slotLevel);\r\n\r\n    if (chosenSpellSlots.value < 1) {\r\n        ui.notifications.error(\"No spell slots of the required level available.\");\r\n        return;\r\n    }\r\n    if (targets.size !== 1) {\r\n        ui.notifications.error(\"You must target exactly one token to Smite.\");\r\n        return;\r\n    }\r\n\r\n    targets.forEach(target => {\r\n        let numDice = slotLevel + 1;\r\n        let type = target.actor.data.data.details.type.toLocaleLowerCase();\r\n        if (suseptible.includes(type)) numDice += 1;\r\n        new Roll(`${numDice}d8`).roll().toMessage({ flavor: \"Macro Divine Smite - Damage Roll (Radiant)\", speaker })\r\n    })\r\n\r\n    chosenSpellSlots.value -= 1;\r\n}","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/light_05.jpg","actorIds":[]}
{"_id":"uQffJq3yM6FOO5I3","name":"Fighting Style: Archery - feat","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Fighting Style: Archery\", {type: \"feat\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/skills/green_01.jpg","actorIds":[]}
{"_id":"ubvVF27EXXApVWZB","name":"Cure Wounds - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Cure Wounds\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-jade-1.jpg","actorIds":[]}
{"_id":"vXnzG1KDE1vKWtZ1","name":"Javelin - weapon","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Javelin\", {type: \"weapon\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/items/weapons/bolt.png","actorIds":[]}
{"_id":"vZolJwAN5xh5B9Qn","name":"Sword Burst - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Sword Burst\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/weapon_12.jpg","actorIds":[]}
{"_id":"viVwypViNY6lat2u","name":"Tasha’s Hideous Laughter - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Tasha’s Hideous Laughter\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"systems/dnd5e/icons/skills/yellow_17.jpg","actorIds":[]}
{"_id":"vv2YonIngr45AzgY","name":"Lesser Restoration - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Lesser Restoration\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/heal-sky-1.jpg","actorIds":[]}
{"_id":"xoOOObTm0him2er4","name":"Pass without Trace - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Pass without Trace\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/fog-air-1.jpg","actorIds":[]}
{"_id":"yFDtuVuoMJ4zEqPb","name":"Thaumaturgy - spell","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"MinorQOL.doRoll(event, \"Thaumaturgy\", {type: \"spell\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"/systems/dnd5e/icons/spells/explosion-royal-1.jpg","actorIds":[]}
{"_id":"z1DZaHpVMOsxj932","name":"Clockwork Amulet - equipment","permission":{"default":0,"Lh5pfUwqYBvIlqqt":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"macro-marker":{"activeData":{"tooltip":"","icon":""}}},"scope":"global","command":"MinorQOL.doRoll(event, \"Clockwork Amulet\", {type: \"equipment\", versatile: false});","author":"Lh5pfUwqYBvIlqqt","img":"imports/icons/Icon.4_98.png","actorIds":[]}
